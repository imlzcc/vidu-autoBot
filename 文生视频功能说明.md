# Vidu 文生视频批量生成功能说明

## 功能概述

本次更新为 Vidu 批量视频生成插件添加了**文生视频模式**，支持直接通过文本提示词批量生成视频，无需上传图片或选择参考主体。

## 新增功能

### 1. 文生视频模式
- **自动检测**：插件会自动检测当前页面是否为文生视频页面 (`/create/text2video`)
- **智能切换**：自动切换到"文生视频"标签页
- **批量处理**：支持批量输入提示词生成视频

### 2. 视频生成设置
- **时长选择**：2秒、4秒、6秒、8秒（默认8秒）
- **宽高比选择**：
  - 16:9 (横屏)
  - 9:16 (竖屏，默认)
  - 1:1 (正方形)
- **数量选择**：1-4个视频（默认1个）
- **错峰模式**：可选的错峰模式开关（默认开启）

### 3. 界面优化
- **页面类型指示器**：显示当前检测到的页面类型
- **文生视频专用界面**：针对文生视频模式优化的用户界面
- **设置持久化**：所有设置会自动保存，下次使用时恢复

## 使用方法

### 1. 准备工作
1. 确保已登录 Vidu 平台
2. 打开文生视频页面：`https://www.vidu.cn/create/text2video`
3. 点击浏览器扩展图标打开插件

### 2. 配置设置
1. 插件会自动检测到"文生视频模式"
2. 在"视频生成设置"部分配置：
   - 选择视频时长
   - 选择宽高比
   - 设置生成数量
   - 开启/关闭错峰模式

### 3. 输入提示词
1. 在"提示词输入"区域粘贴或输入提示词
2. 每行一个提示词
3. 支持从剪贴板粘贴（点击"📋 粘贴提示词"按钮）

### 4. 开始批量处理
1. 确认设置无误后，点击"开始批量处理"
2. 插件会自动：
   - 切换到文生视频标签页
   - 配置视频设置
   - 逐个输入提示词并提交
   - 等待处理完成后继续下一个

## 技术实现

### 页面检测
```javascript
// 检测文生视频页面
if (url.includes('/create/text2video')) {
    return 'text2video';
}
```

### 视频设置配置
```javascript
// 配置视频参数
await this.setVideoDuration(duration);
await this.setVideoAspectRatio(aspectRatio);
await this.setVideoQuantity(quantity);
if (offPeakMode) {
    await this.enableOffPeakMode();
}
```

### 批量处理流程
1. 切换到文生视频标签页
2. 配置视频设置（时长、宽高比、数量、错峰模式）
3. 输入提示词
4. 智能检测并点击创作按钮
5. 等待提交确认
6. 清空内容准备下一个任务

## 注意事项

1. **页面兼容性**：确保在正确的文生视频页面使用
2. **网络稳定性**：建议在网络稳定的环境下使用
3. **批量限制**：建议单次处理不超过50个提示词
4. **错峰模式**：开启错峰模式可以避免服务器压力过大

## 更新日志

### v4.0.0
- ✅ 新增文生视频模式支持
- ✅ 添加视频生成设置界面
- ✅ 支持时长、宽高比、数量、错峰模式配置
- ✅ 优化页面类型检测逻辑
- ✅ 更新用户界面和样式
- ✅ 完善错误处理和日志记录

## 故障排除

### 常见问题
1. **页面检测失败**：确保在正确的文生视频页面
2. **设置不生效**：检查页面元素是否正确加载
3. **批量处理中断**：检查网络连接和页面状态

### 调试方法
1. 打开浏览器开发者工具
2. 查看控制台日志输出
3. 检查页面元素是否正确识别

## 技术支持

如有问题或建议，请通过以下方式联系：
- 查看控制台日志获取详细错误信息
- 检查插件版本是否为最新
- 确认页面URL格式正确
